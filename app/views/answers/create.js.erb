<% if @answer.errors.present? %>
  <% @answer.errors.full_messages.each do |message| %>
    $('.answer_errors').html('<%= j message %>');
  <% end %>
<% else %>
  var answerID = '<%= @answer.id %>'

  <% publish_to "/questions/#{@question.id}/answers" do %>
    $('.answers').append('<%= j render partial: 'answers/answer_pub_content', locals: { answer: @answer } %>');
  <% end %>

  $('#answer-' + answerID).append('<%= j render partial: 'answers/answer_links', locals: { answer: @answer } %>');
  $('#answer_content').val('');
  $('.answer_errors').html('');
<% end %>

